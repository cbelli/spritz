
CREATE TABLE voting_user (
    user_id serial primary key,
    user_name text unique not null,
    pass_word text not null
);


--
-- Name: guarantor; Type: TABLE; Schema: public; Owner: dinogen
--

CREATE TABLE guarantor (
    votation_id integer NOT NULL,
    user_id integer NOT NULL,
    passphrase_ok integer NOT NULL,
    hash_ok integer NOT NULL,
    order_n integer
);


--
-- Name: votation; Type: TABLE; Schema: public; Owner: dinogen
--

CREATE TABLE votation (
    votation_id serial primary key,
    promoter_user_id integer NOT NULL,
    votation_description text NOT NULL unique,
    begin_date timestamp without time zone NOT NULL,
    end_date timestamp without time zone NOT NULL,
    votation_type text NOT NULL,
    votation_status integer NOT NULL
);




--
-- Name: vote; Type: TABLE; Schema: public; Owner: dinogen
--

CREATE TABLE vote (
    vote_key text NOT NULL,
    votation_id integer NOT NULL,
    option_id integer NOT NULL,
    jud_value integer,
    PRIMARY KEY (vote_key, votation_id, option_id)
);



--
-- Name: voter; Type: TABLE; Schema: public; Owner: dinogen
--

CREATE TABLE voter (
    user_id integer NOT NULL,
    votation_id integer NOT NULL,
    PRIMARY KEY (user_id, votation_id)
);



--
-- Name: voting_option; Type: TABLE; Schema: public; Owner: dinogen
--

CREATE TABLE voting_option (
    option_id serial primary key,
    votation_id integer,
    option_name text,
    description text
);






--
-- Name: voting_option voting_option_votation_id_option_name_key; Type: CONSTRAINT; Schema: public; Owner: dinogen
--

ALTER TABLE ONLY voting_option
    ADD CONSTRAINT voting_option_votation_id_option_name_key UNIQUE (votation_id, option_name);



